# 目录

1. 目的
2. 总体设计
3. 软件介绍







# 1目的	
   本文主要介绍利用Qt实现局域网通信的主要实现流程和一些技术知识点的设计说明。
# 2总体设计
## 2.1 功能特点 
这款局域网通信软件是基于Qt的实现的C/S架构通信，通信功能全部采用QTcpSocket完成的。该软件分为2部分，一部分是服务端，一部分是客户端。
程序运行过程中有一台服务器和多台客户端。客户端之间不能直接通信。所有的消息都必须先经过服务器，服务器对消息进行解析，根据消息类型做出相应处理。服务器在整个过程中充当者中转站的角色
消息通信采用QJsonValue的格式进行封装，方便封装和解析。

## 2.2 模块结构
​    整个设计可以大致分为服务端、客户端，服务端功能相对比较单一，仅仅做了客户端的消息管理和转发等。数据库读写等。客户端相对较为丰富。包括登陆、注册、好友管理、群组管理、tcp消息管理，数据库管理，
​	整个项目设计的功能的设计流程图大致如下所示：

图2-1
## 2.3 开发环境
本项目的采用Qt在LInux系统环境下进行设计开发，Qt版本为6.4。
# 3软件介绍	
## 3.1 软件功能介绍
### 3.1.1 登录功能介绍
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_login.png)
    （登陆界面-图1）
根据上图所示登录界面的输入框提示填写自己的帐号密码：
帐号输入框：输入帐号的id（不是用户名）
密码输入框：输入帐号对应的密码
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_login_success.png)
（登陆成功-图1-2）
出现图1-2则表明登陆成功，登陆界面跳转至“成功登陆”界面。点击“Cancel”可取消登陆。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_information.png)
（用户名无效-图1-3）

![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_check.png)
（用户名不存在-图1-4）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_check_password.png)
（密码错误-图1-5）
否则出现图1-3、图1-4、图1-5表示登陆失败，界面会出现错误信息提示，根据错误信息提示修改信息即可。

### 3.1.2 网络设置功能介绍
![](/run/media/root/study/kaiyuan/MyChat/readme_image/clent_net.png)
（服务器设置—图2）
根据上图（图2）所示，服务器连接端输入对应的IP地址、端口号和文件端口号：
IP输入框：输入想要连接的IP地址
Port输入框：输入系统配置好的端口号
文件端口输入框：输入系统服务器端配置好的文件端口号
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_net_connect.png)
（连接成功-图2-2）
出现图2-2所示，表明连接成功。可以进行后面的用户登陆注册功能。

### 3.1.3 注册界面介绍
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_register.png)
（注册界面-图3）
根据上图（图3）所示，在注册页面对应的框内输入注册用户名、密码、再次输入密码，最后点击确认，完成注册。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_register_success.png)
（成功注册-图3-1）
出现图3-1所示，有个注册id提示框则表明注册成功。注册信息（系统返回用户名对应的ID和密码）会同时显示在控制t台下供用户查阅。
UserName输入框：输入账户ID
Password输入框：输入账户密码

## 3.2 主界面功能介绍
### 3.2.1 添加好友功能
输入要添加的好友ID号，点击Search按钮，会出现查询的结果。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/clent_add.png)
（添加好友主界面-图1）			

![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_find.png)
上图会查询到的用户信息，点击添加好友按钮，对方会收到好友请求信息。

（输入查询ID-图1-2）
     ![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_addsuccess.png)
 （接收方弹出好友添加对话框-图1-3）
  点击Accept同意好友添加，就会和该用户称成为好友。或者点击Reject拒绝好友添加。

![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_accept.png)

（添加好友成功-图1-4）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_add_blank.png)
（输入ID不能为空-图1-5）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_addself.png)
（无法添加自己为好友-图1-6）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/client_add_blank.png)
（未查询到好友-图1-7）

### 3.2.2 添加群聊功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/createGroup_w.png)
（创建群聊-图2）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/createGroup.png)
（创建群聊成功-图2-2）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/addGroup.png)
（查询群聊-图2-3）

![](/run/media/root/study/kaiyuan/MyChat/readme_image/addGroupRequest.png)

![](/run/media/root/study/kaiyuan/MyChat/readme_image/agreeGroup.png)
（接收方弹出申请对话框-图2-4）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/addGroup_success.png)
（添加群聊成功-图2-5）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/find_groupinfo.png)
（查看群成员信息-图2-6）

### 3.2.3 发送群聊文件功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/send_Group.png)
（发送群聊文件-图3）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/Recv_group.png)
（接收群聊文件-图3-2）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/rec_file.png)
（接收群聊文件完成-图3-3）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/open_file.png)
（查看群聊的本地下载文件-图3-4）

### 3.2.4 私聊功能


![](/run/media/root/study/kaiyuan/MyChat/readme_image/send_friend.png)

（发送私聊-图4）

### 3.2.5 群聊功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/send_Group.png)
（发送群聊-图5）

### 3.2.6发送表情包
![](/run/media/root/study/kaiyuan/MyChat/readme_image/emoji.png)
点击表情按钮，会弹出表情包列表，点击想要发送的表情包即可发送。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/emoji_send.png)

### 3.2.7 发送私聊图片
![](/run/media/root/study/kaiyuan/MyChat/readme_image/sendPicture.png)
点击发送图片按钮，会弹出选择本地图片的对话框，点击要发送的图片即可发送。

### 3.2.8 发送私聊文件
![](/run/media/root/study/kaiyuan/MyChat/readme_image/send_file_firnd.png)
（发送私聊文件-图7）
![](/run/media/root/study/kaiyuan/MyChat/readme_image/recv_frind.png)
（接收私聊文件-图7-2）

### 3.2.9 截图
![](/run/media/root/study/kaiyuan/MyChat/readme_image/cut.png)
点击截图按钮，会弹出截屏框，可以根据自己想要的大小形状进行截屏。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/cutSrceen.png)

截图完成后，再截图工具栏选择保存为文件、取消截图、完成截图等功能

### 3.2.10查看各地实时天气
点击左侧菜单栏天气按钮，会出现如下显示框。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/weather.png)
显示天气

![](/run/media/root/study/kaiyuan/MyChat/readme_image/weather_find.png)
点击搜索想要查看的城市天气，会出现当地实时天气信息。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/weather_srcoll.png)
在天气对话框中，下方会滚动播放天气信息，空气质量，紫外线指数。

### 3.2.11 查看联系人列表功能
点击左侧菜单栏的好友头像按钮，会出现如下显示（默认显示好友联系人列表）：
点击显示后的中栏列表上侧的“friend"按钮会显示下图：
![](/run/media/root/study/kaiyuan/MyChat/readme_image/contact_friend.png)
好友联系人列表
点击显示后的中栏列表上侧的“group"按钮会显示下图：
![](/run/media/root/study/kaiyuan/MyChat/readme_image/contact_group.png)
群组联系人列表

## 3.3 服务器功能介绍
### 3.3.1 管理员登陆功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_login.png)
（服务器登陆界面-图1）
       如图1所示，在UserName和PassWord输入框内输入信息。
UserName输入框：管理员账户名
Password输入框：管理员账户密码

### 3.3.2 管理查看用户信息功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_main.png)
（查看用户信息-图2）
登陆管理员界面成功后，点击左边方框“用户信息”即可成功查询用户信息。

### 3.3.3 查看服务配置功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_net.png)
（查看服务器配置-图3）
点击左边方框“服务配置”即可成功查询或更改服务器端配置信息（比如消息端口号、文件端口号），还可显示用户的上下线消息。

### 3.3.4 修改用户信息功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_user.png)
（显示用户信息-图4）
点击左边方框列表里的“用户管理”即可查询并修改用户信息。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_refresh.png)
（刷新用户信息-图4）
点击”Refresh”按钮即可刷新用户信息并显示。
![](/run/media/root/study/kaiyuan/MyChat/readme_image/Server_add.png)
（添加用户信息-图4）
输入“UserName”和“PassWord”文本框后，点击“Add”按钮即可创建一名用户。

![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_add_success.png)

### 3.3.5 修改管理员账户密码功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_pass.png)
（密码修改-图5）
点击左边方框“密码修改”，进入密码修改页面。根据上图（图5）提示，在UserName、NewPassword输入框内输入修改信息，最后点击Reset重置密码即可。
UserName输入框：输入管理员账户名
NewPassword输入框：输入修改的管理员密码信息
Reset输入框：再次输入修改的新密码信息

### 3.3.6 数据备份功能
![](/run/media/root/study/kaiyuan/MyChat/readme_image/server_backup.png)
（数据备份-图6）
点击左边方框“数据备份”后，在TextLabel输入框内输入保存备份数据（数据库内包括的所有用户信息和管理员的信息）的地址即可成功备份。
 